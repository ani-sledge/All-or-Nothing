var scoreCard=angular.module("scoreCard",[]);scoreCard.controller("GameController",["$scope",function(e){function t(e){this.name="",this.score=100,this.tricks="0",this.all=!1}e.active=!0,e.instructions=!1,e.round=1,e.dealer=0,e.team=!1,e.has_edited_game=!1,e.player_count="4",e.options=[2,3,4,5,6,7,8],e.debug="";var r={2:10,3:10,4:10,5:8,6:8,7:6,8:6,"team-2":10,"team-3":8,"team-4":6};e.players=[new t(!0),new t(!1),new t(!1),new t(!1)],e.restart=function(){for(e.players=[],j=0;j<e.player_count;j++)e.players.push(new t);e.active=!0,e.round=1,e.dealer=0,e.has_edited_game=!1},e.newGame=function(){e.has_edited_game?(e.confirm=confirm("This action will cause the game to reset.\nDo you want to continue?"),e.confirm&&e.restart()):e.restart()},e.confirmTeam=function(){e.has_edited_game?(e.confirm=confirm("This action will cause the game to reset.\nDo you want to continue?"),e.confirm?(e.player_count>4&&(e.player_count="4"),e.restart()):(e.team=!e.team,e.team&&e.restart())):e.player_count>4?(e.player_count="4",e.restart()):e.restart()},e.teamOptions=function(){return e.team?[2,3,4]:[2,3,4,5,6,7,8]},e.trickOptions=function(){var t=[];for(i=0;i<=e.tricksTotal();i++)t.push(i);return t},e.confirmCount=function(){e.has_edited_game?(e.confirm=confirm("This action will cause the game to reset.\nDo you want to continue?"),e.confirm?e.restart():e.player_count=String(e.players.length)):e.restart()},e.setHasEdited=function(t){e.has_edited_game=t},e.tricksTotal=function(){if(e.team){var t="team-"+e.player_count;return r[t]}return r[e.player_count]},e.changeDealer=function(t){e.dealer=t},e.calculateScore=function(e,t,r,a){var n=0;return r?e==t&&a?n-=50:e!=t||a?n+=10*(t-e):n-=100:0==e?n-=20:n+=10*e,n},e.getTeam=function(){return e.team?"Team":"Player"},e.getBid=function(e){return e?"All":"Nothing"},e.meetTotalTricks=function(){var t=0;for(i=0;i<e.players.length;i++)t+=Number(e.players[i].tricks);return t==e.tricksTotal()?!0:!1},e.showInstructions=function(){e.instructions=!0},e.hideInstructions=function(){e.instructions=!1},e.getPlace=function(e){return 1==e?"1st":2==e?"2nd":3==e?"3rd":e+"th"},e.gameOver=function(){for(i=0;i<e.players.length;i++)""==e.players[i].name&&(e.team?e.players[i].name="Team "+(i+1):e.players[i].name="Player "+(i+1));e.round=0,e.active=!1,e.has_edited_game=!1},e.advanceGame=function(){if(e.round<=10&&e.active)if(e.meetTotalTricks()){for(e.round+=1,e.dealer=(e.dealer+1)%e.player_count,i=0;i<e.players.length;i++){var t=e.players[i],r=e.tricksTotal(),a=e.calculateScore(t.tricks,r,t.all,e.team);t.score+=a,t.tricks="0",t.all=!1}11==e.round&&e.gameOver()}else alert("The total tricks for this round is incorrect.");else e.gameOver();for(i=0;i<e.players.length;i++)e.players[i].score<=0&&e.gameOver()}}]);